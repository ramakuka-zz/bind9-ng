// Generated by Chef for <%= node['fqdn'] %>
// Local modifications will be overwritten.
// This is the ACL file to use by bind
<% if !node[:bind9][:channel][:include].nil? %>
	<% node[:bind9][:channel][:include].keys.each do |include|  %>
include "<%=  node[:bind9][:channel][:include][include] %>";
	<%end%>
<%end%>

<% if node[:bind9][:channel] %>
	<% node[:bind9][:channel].keys.each do |channel| %>
		<% if channel != "include"%>
<%= channel %> {
		<% node[:bind9][:channel][channel].keys.each do |channelnum| %>
		inet <%= node[:bind9][:channel][channel][channelnum][:inet] %> port <%= !node[:bind9][:channel][channel][channelnum][:port].nil? ? node[:bind9][:channel][channel][channelnum][:port] : '8123' %> allow {"<%= !node[:bind9][:channel][channel][channelnum][:allow].nil? ?   node[:bind9][:channel][channel][channelnum][:allow] : '127.0.0.1' %>";} <% if !node[:bind9][:channel][channel][channelnum][:keys].nil? %> keys {"<%= node[:bind9][:channel][channel][channelnum][:keys] %>";} <% end %>;
		<% end %>
};
	<% end %>
  <% end %>
 <% end %>
